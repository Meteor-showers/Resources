function convertToJsDelivr(){const match=document.getElementById("githubUrl").value.match(/https:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([^\/]+)\/(.+)/);if(match){const jsDelivrUrl=`https://cdn.jsdelivr.net/gh/${match[1]}/${match[2]}@${match[3]}/${match[4]}`;document.getElementById("result").innerHTML=`<div class="result-container"><p>è½¬æ¢åçš„jsDelivré“¾æ¥ï¼š</p><button class="copy-btn" onclick="copyToClipboard('${jsDelivrUrl}', this)">å¤åˆ¶</button><button class="purge-btn" onclick="purgeCDN('${jsDelivrUrl}', this)">åˆ·æ–°cdn</button></div><a href="${jsDelivrUrl}" target="_blank">${jsDelivrUrl}</a>`;document.getElementById("result").style.display="block"}else{document.getElementById("result").innerHTML="<p>è¯·è¾“å…¥æœ‰æ•ˆçš„GitHubæ–‡ä»¶åœ°å€ã€‚ğŸ’£ğŸ’£ğŸ’£</p>";document.getElementById("result").style.display="block";setTimeout(()=>{document.getElementById("result").style.display="none"},1e3)}}function copyToClipboard(text,button){navigator.clipboard.writeText(text).then(()=>{button.innerText="å·²å¤åˆ¶";toggleButtonState(button)}).catch(err=>{alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")})}function purgeCDN(url,button){const purgeUrl=url.replace("https://cdn.jsdelivr.net/","https://purge.jsdelivr.net/");fetch(purgeUrl,{method:'GET'}).then(response=>response.json()).then(data=>{if(data.status==="finished"){button.innerText="åˆ·æ–°å®Œæˆ"}else{alert("åˆ·æ–°å¤±è´¥ï¼Œè¯·ç¨åå†è¯•")}toggleButtonState(button)}).catch(err=>{alert("åˆ·æ–°å¤±è´¥ï¼Œè¯·ç¨åå†è¯•");toggleButtonState(button)})}function clearResult(){if(document.getElementById("githubUrl").value===""){document.getElementById("result").style.display="none"}else{document.getElementById("result").innerHTML=""}}function handleKeyPress(event){if(event.key==="Enter"){convertToJsDelivr()}}function getQueryParams(){const params=new URLSearchParams(window.location.search);for(const param of params.entries()){if(param[0].startsWith("https://github.com/")){return param[0]}}return""}function toggleButtonState(button){button.classList.add("clicked");setTimeout(()=>{button.classList.remove("clicked")},500)}window.onload=()=>{const githubUrl=getQueryParams();if(githubUrl){document.getElementById("githubUrl").value=githubUrl;convertToJsDelivr()}};